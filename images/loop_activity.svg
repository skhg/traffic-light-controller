<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1240px" preserveAspectRatio="none" style="width:604px;height:1240px;" version="1.1" viewBox="0 0 604 1240" width="604px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pdl153lp1zr6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="168" x="217.25" y="26.708">loop(void) method</text><ellipse cx="279.5" cy="40.9531" fill="#000000" filter="url(#f1pdl153lp1zr6)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="219.5" y="70.9531"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="229.5" y="92.0918">Handle requests</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="306" x="126.5" y="180.6323"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="286" x="136.5" y="201.771">Execute the corresponding handle&lt;X&gt; method</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="214,124.9219,345,124.9219,357,136.9219,345,148.9219,214,148.9219,202,136.9219,214,124.9219" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="159.1323">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="214" y="140.73">Pending HTTP request?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="15" x="187" y="134.3276">No</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="225" y="256.6011"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="235" y="277.7397">Update rhythm</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="228" x="165.5" y="358.9722"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="208" x="175.5" y="380.1108">Set the next beat start time = now</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="137.5,412.9409,421.5,412.9409,433.5,424.9409,421.5,436.9409,137.5,436.9409,125.5,424.9409,137.5,412.9409" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="284" x="137.5" y="428.749">Have we reached the end of the rhythm pattern?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="104.5" y="422.3467">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="433.5" y="422.3467">no</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="209" x="11" y="446.9409"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="189" x="21" y="468.0796">Return to rhythm pattern step 0</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="194" x="346.5" y="446.9409"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="174" x="356.5" y="468.0796">Advance to next rhythm step</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="279.5,486.9097,291.5,498.9097,279.5,510.9097,267.5,498.9097,279.5,486.9097" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="197,310.5698,362,310.5698,374,322.5698,362,334.5698,197,334.5698,185,322.5698,197,310.5698" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="344.7803">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="197" y="326.3779">Has the current beat ended?</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="279.5,530.9097,291.5,542.9097,279.5,554.9097,267.5,542.9097,279.5,530.9097" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="227.5" y="574.9097"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="237.5" y="596.0483">Read Sensors</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="172.5" y="677.2808"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="182.5" y="698.4194">Set the sensor read time = now</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="226.5" y="731.2495"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="236.5" y="752.3882">Take readings</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="187.5" y="785.2183"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="197.5" y="806.3569">Send to WebSocket clients</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="162.5,628.8784,396.5,628.8784,408.5,640.8784,396.5,652.8784,162.5,652.8784,150.5,640.8784,162.5,628.8784" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="663.0889">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="162.5" y="644.6865">Is it time to take a temperature reading?</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="279.5,839.187,291.5,851.187,279.5,863.187,267.5,851.187,279.5,839.187" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="213" y="883.187"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="223" y="904.3257">Set the lights state</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="208,985.5581,351,985.5581,363,997.5581,351,1009.5581,208,1009.5581,196,997.5581,208,985.5581" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="143" x="208" y="1001.3662">Are we in the "off" beat?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="175" y="994.9639">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="363" y="994.9639">no</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="75.25" y="1019.5581"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="85.25" y="1040.6968">Switch OFF both lights</text><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="315" x="249.25" y="1019.5581"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="295" x="259.25" y="1040.6968">Set both lights to the pattern for this rhythm step</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="279.5,1059.5269,291.5,1071.5269,279.5,1083.5269,267.5,1071.5269,279.5,1059.5269" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="187.5" y="1103.5269"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="164" x="197.5" y="1124.6655">Send to WebSocket clients</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="214,937.1558,345,937.1558,357,949.1558,345,961.1558,214,961.1558,202,949.1558,214,937.1558" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="283.5" y="971.3662">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="131" x="214" y="952.9639">Are we in party mode?</text><polygon fill="#FEFECE" filter="url(#f1pdl153lp1zr6)" points="279.5,1157.4956,291.5,1169.4956,279.5,1181.4956,267.5,1169.4956,279.5,1157.4956" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="279.5" cy="1212.4956" fill="#FFFFFF" filter="url(#f1pdl153lp1zr6)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="279.5" cy="1212.4956" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="50.9531" y2="70.9531"/><polygon fill="#A80036" points="275.5,60.9531,279.5,70.9531,283.5,60.9531,279.5,64.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="148.9219" y2="180.6323"/><polygon fill="#A80036" points="275.5,170.6323,279.5,180.6323,283.5,170.6323,279.5,174.6323" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="214.6011" y2="224.6011"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="444.5" y1="224.6011" y2="224.6011"/><polygon fill="#A80036" points="440.5,189.2144,444.5,179.2144,448.5,189.2144,444.5,185.2144" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="444.5" x2="444.5" y1="136.9219" y2="224.6011"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="444.5" x2="357" y1="136.9219" y2="136.9219"/><polygon fill="#A80036" points="367,132.9219,357,136.9219,367,140.9219,363,136.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="202" x2="114.5" y1="136.9219" y2="136.9219"/><polygon fill="#A80036" points="110.5,175.2144,114.5,185.2144,118.5,175.2144,114.5,179.2144" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="114.5" x2="114.5" y1="136.9219" y2="236.6011"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="114.5" x2="279.5" y1="236.6011" y2="236.6011"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="236.6011" y2="256.6011"/><polygon fill="#A80036" points="275.5,246.6011,279.5,256.6011,283.5,246.6011,279.5,250.6011" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="104.9219" y2="124.9219"/><polygon fill="#A80036" points="275.5,114.9219,279.5,124.9219,283.5,114.9219,279.5,118.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="125.5" x2="115.5" y1="424.9409" y2="424.9409"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115.5" x2="115.5" y1="424.9409" y2="446.9409"/><polygon fill="#A80036" points="111.5,436.9409,115.5,446.9409,119.5,436.9409,115.5,440.9409" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="433.5" x2="443.5" y1="424.9409" y2="424.9409"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="443.5" x2="443.5" y1="424.9409" y2="446.9409"/><polygon fill="#A80036" points="439.5,436.9409,443.5,446.9409,447.5,436.9409,443.5,440.9409" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115.5" x2="115.5" y1="480.9097" y2="498.9097"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="115.5" x2="267.5" y1="498.9097" y2="498.9097"/><polygon fill="#A80036" points="257.5,494.9097,267.5,498.9097,257.5,502.9097,261.5,498.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="443.5" x2="443.5" y1="480.9097" y2="498.9097"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="443.5" x2="291.5" y1="498.9097" y2="498.9097"/><polygon fill="#A80036" points="301.5,494.9097,291.5,498.9097,301.5,502.9097,297.5,498.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="392.9409" y2="412.9409"/><polygon fill="#A80036" points="275.5,402.9409,279.5,412.9409,283.5,402.9409,279.5,406.9409" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="334.5698" y2="358.9722"/><polygon fill="#A80036" points="275.5,348.9722,279.5,358.9722,283.5,348.9722,279.5,352.9722" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="374" x2="560.5" y1="322.5698" y2="322.5698"/><polygon fill="#A80036" points="556.5,417.4409,560.5,427.4409,564.5,417.4409,560.5,421.4409" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="560.5" x2="560.5" y1="322.5698" y2="542.9097"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="560.5" x2="291.5" y1="542.9097" y2="542.9097"/><polygon fill="#A80036" points="301.5,538.9097,291.5,542.9097,301.5,546.9097,297.5,542.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="510.9097" y2="530.9097"/><polygon fill="#A80036" points="275.5,520.9097,279.5,530.9097,283.5,520.9097,279.5,524.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="290.5698" y2="310.5698"/><polygon fill="#A80036" points="275.5,300.5698,279.5,310.5698,283.5,300.5698,279.5,304.5698" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="554.9097" y2="574.9097"/><polygon fill="#A80036" points="275.5,564.9097,279.5,574.9097,283.5,564.9097,279.5,568.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="711.2495" y2="731.2495"/><polygon fill="#A80036" points="275.5,721.2495,279.5,731.2495,283.5,721.2495,279.5,725.2495" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="765.2183" y2="785.2183"/><polygon fill="#A80036" points="275.5,775.2183,279.5,785.2183,283.5,775.2183,279.5,779.2183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="652.8784" y2="677.2808"/><polygon fill="#A80036" points="275.5,667.2808,279.5,677.2808,283.5,667.2808,279.5,671.2808" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="408.5" x2="420.5" y1="640.8784" y2="640.8784"/><polygon fill="#A80036" points="416.5,738.2339,420.5,748.2339,424.5,738.2339,420.5,742.2339" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="420.5" x2="420.5" y1="640.8784" y2="851.187"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="420.5" x2="291.5" y1="851.187" y2="851.187"/><polygon fill="#A80036" points="301.5,847.187,291.5,851.187,301.5,855.187,297.5,851.187" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="819.187" y2="839.187"/><polygon fill="#A80036" points="275.5,829.187,279.5,839.187,283.5,829.187,279.5,833.187" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="608.8784" y2="628.8784"/><polygon fill="#A80036" points="275.5,618.8784,279.5,628.8784,283.5,618.8784,279.5,622.8784" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="863.187" y2="883.187"/><polygon fill="#A80036" points="275.5,873.187,279.5,883.187,283.5,873.187,279.5,877.187" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="196" x2="152.25" y1="997.5581" y2="997.5581"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="152.25" x2="152.25" y1="997.5581" y2="1019.5581"/><polygon fill="#A80036" points="148.25,1009.5581,152.25,1019.5581,156.25,1009.5581,152.25,1013.5581" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="363" x2="406.75" y1="997.5581" y2="997.5581"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.75" x2="406.75" y1="997.5581" y2="1019.5581"/><polygon fill="#A80036" points="402.75,1009.5581,406.75,1019.5581,410.75,1009.5581,406.75,1013.5581" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="152.25" x2="152.25" y1="1053.5269" y2="1071.5269"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="152.25" x2="267.5" y1="1071.5269" y2="1071.5269"/><polygon fill="#A80036" points="257.5,1067.5269,267.5,1071.5269,257.5,1075.5269,261.5,1071.5269" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.75" x2="406.75" y1="1053.5269" y2="1071.5269"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="406.75" x2="291.5" y1="1071.5269" y2="1071.5269"/><polygon fill="#A80036" points="301.5,1067.5269,291.5,1071.5269,301.5,1075.5269,297.5,1071.5269" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="1083.5269" y2="1103.5269"/><polygon fill="#A80036" points="275.5,1093.5269,279.5,1103.5269,283.5,1093.5269,279.5,1097.5269" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="961.1558" y2="985.5581"/><polygon fill="#A80036" points="275.5,975.5581,279.5,985.5581,283.5,975.5581,279.5,979.5581" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="357" x2="578.5" y1="949.1558" y2="949.1558"/><polygon fill="#A80036" points="574.5,1059.0269,578.5,1069.0269,582.5,1059.0269,578.5,1063.0269" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.5" x2="578.5" y1="949.1558" y2="1169.4956"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="578.5" x2="291.5" y1="1169.4956" y2="1169.4956"/><polygon fill="#A80036" points="301.5,1165.4956,291.5,1169.4956,301.5,1173.4956,297.5,1169.4956" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="1137.4956" y2="1157.4956"/><polygon fill="#A80036" points="275.5,1147.4956,279.5,1157.4956,283.5,1147.4956,279.5,1151.4956" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="917.1558" y2="937.1558"/><polygon fill="#A80036" points="275.5,927.1558,279.5,937.1558,283.5,927.1558,279.5,931.1558" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279.5" x2="279.5" y1="1181.4956" y2="1201.4956"/><polygon fill="#A80036" points="275.5,1191.4956,279.5,1201.4956,283.5,1191.4956,279.5,1195.4956" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b4bbc6343dfa7a10c5ce8945dc0bedd5]
@startuml
title loop(void) method 

start

:Handle requests; 

while (Pending HTTP request?)  is (yes)
  :Execute the corresponding handle<X> method;
endwhile (No)

:Update rhythm;

if (Has the current beat ended?) then (yes)
  :Set the next beat start time = now;

    if (Have we reached the end of the rhythm pattern?) then (yes)
        :Return to rhythm pattern step 0;
    else (no)
        :Advance to next rhythm step;
    endif
else
endif

:Read Sensors;

if (Is it time to take a temperature reading?) then (yes)
    :Set the sensor read time = now;
    :Take readings;
    :Send to WebSocket clients;
else
endif

:Set the lights state;

if (Are we in party mode?) then (yes)
    if (Are we in the "off" beat?) then (yes)
        :Switch OFF both lights;
    else (no)
        :Set both lights to the pattern for this rhythm step;
    endif
    :Send to WebSocket clients;
else
endif

stop
@enduml

PlantUML version 1.2020.20beta13(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>